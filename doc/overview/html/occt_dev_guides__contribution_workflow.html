<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open CASCADE Technology: Contribution Workflow</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="occ_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open CASCADE Technology
   &#160;<span id="projectnumber">7.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('occt_dev_guides__contribution_workflow.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Contribution Workflow </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#occt_contribution_intro">Introduction</a><ul><li class="level2"><a href="#occt_contribution_intro_tracker">Use of issue tracker system</a></li>
<li class="level2"><a href="#occt_contribution_intro_access">Access levels</a></li>
</ul>
</li>
<li class="level1"><a href="#occt_contribution_workflow">Standard workflow for an issue</a><ul><li class="level2"><a href="#occt_contribution_workflow_general">General scheme</a></li>
<li class="level2"><a href="#occt_contribution_workflow_issue">Issue registration</a></li>
<li class="level2"><a href="#occt_contribution_workflow_assign">Assigning the issue</a></li>
<li class="level2"><a href="#occt_contribution_workflow_fix">Resolving the issue</a><ul><li class="level3"><a href="#occt_contribution_workflow_fix_code">Requirements to the code modification</a></li>
<li class="level3"><a href="#occt_contribution_workflow_fix_test">Providing a test case</a></li>
<li class="level3"><a href="#occt_contribution_workflow_fix_doc">Updating user and developer guides</a></li>
<li class="level3"><a href="#occt_contribution_workflow_fix_git">Submission of change as a Git branch</a></li>
<li class="level3"><a href="#occt_contribution_workflow_fix_commit">Requirements to the commit message</a></li>
<li class="level3"><a href="#occt_contribution_workflow_fix_resolve">Marking issue as resolved</a></li>
</ul>
</li>
<li class="level2"><a href="#occt_contribution_workflow_review">Code review</a></li>
<li class="level2"><a href="#occt_contribution_workflow_test">Testing</a></li>
<li class="level2"><a href="#occt_contribution_workflow_integrate">Integration of a solution</a></li>
<li class="level2"><a href="#occt_contribution_workflow_close">Closing an issue</a></li>
</ul>
</li>
<li class="level1"><a href="#occt_contribution_nonstd">Additional workflow elements</a><ul><li class="level2"><a href="#occt_contribution_nonstd_feedback">Requesting more information or specific action</a></li>
<li class="level2"><a href="#occt_contribution_nonstd_relate">Defining relationships between issues</a></li>
<li class="level2"><a href="#occt_contribution_nonstd_patch">Submission of a change as a patch</a></li>
<li class="level2"><a href="#occt_contribution_nonstd_rebase">Updating branches in Git</a></li>
<li class="level2"><a href="#occt_contribution_nonstd_minor">Minor corrections</a></li>
<li class="level2"><a href="#occt_contribution_nonstd_autofix">Handling non-reproducible issues</a></li>
</ul>
</li>
<li class="level1"><a href="#occt_contribution_app">Appendix: Issue attributes</a><ul><li class="level2"><a href="#occt_contribution_app_category">Category</a></li>
<li class="level2"><a href="#occt_contribution_app_severity">Severity</a></li>
<li class="level2"><a href="#occt_contribution_app_status">Status</a></li>
<li class="level2"><a href="#occt_contribution_app_resolution">Resolution</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="occt_contribution_intro"></a>
Introduction</h1>
<p>The purpose of this document is to describe standard workflow for processing contributions to certified version of OCCT.</p>
<h2><a class="anchor" id="occt_contribution_intro_tracker"></a>
Use of issue tracker system</h2>
<p>Each contribution should have corresponding issue (bug, or feature, or integration request) registered in the MantisBT issue tracker system accessible by URL <a href="http://tracker.dev.opencascade.org">http://tracker.dev.opencascade.org</a>. The issue is processed according to the described workflow.</p>
<h2><a class="anchor" id="occt_contribution_intro_access"></a>
Access levels</h2>
<p>Access level defines the permissions of the user to view, register and modify issues in the issue tracker. The correspondence of access level and user permissions is defined in the table below.</p>
<table class="doxtable">
<tr>
<th align="left">Access level </th><th align="left">Granted to </th><th align="left">Permissions </th><th align="left">Can set statuses  </th></tr>
<tr>
<td align="left">Viewer </td><td align="left">Everyone (anonymous access) </td><td align="left">View public issues only </td><td align="left">None </td></tr>
<tr>
<td align="left">Updater </td><td align="left">Users registered on dev.opencascade.org, in Open CASCADE project </td><td align="left">View and comment issues </td><td align="left">None </td></tr>
<tr>
<td align="left">Reporter </td><td align="left">Users registered on dev.opencascade.org, in Community project </td><td align="left">View, report, and comment issues </td><td align="left">New, Resolved, Feedback </td></tr>
<tr>
<td align="left">Developer </td><td align="left">OCC developers and (in Community project) external contributors who signed the CLA </td><td align="left">View, report, modify, and handle issues </td><td align="left">New, Assigned, Resolved, Reviewed, Feedback </td></tr>
<tr>
<td align="left">Tester </td><td align="left">OCC engineer devoted to certification testing </td><td align="left">View, report, modify, and handle issues </td><td align="left">Assigned, Tested, Feedback </td></tr>
<tr>
<td align="left">Maintainer </td><td align="left">Person responsible for a project or OCCT component </td><td align="left">View, report, modify, and handle issues </td><td align="left">New, Resolved, Reviewed, Tested, Closed, Feedback </td></tr>
<tr>
<td align="left">Bugmaster </td><td align="left">Person responsible for Mantis issue tracker, integrations, certification, and releases </td><td align="left">Full access </td><td align="left">All statuses </td></tr>
</table>
<p>According to his access level, the user can participate in the issue handling process under different roles, as described below.</p>
<h1><a class="anchor" id="occt_contribution_workflow"></a>
Standard workflow for an issue</h1>
<h2><a class="anchor" id="occt_contribution_workflow_general"></a>
General scheme</h2>
<center> <div class="image">
<object type="image/svg+xml" data="OCCT_ContributionWorkflow_V3_image001.svg">OCCT_ContributionWorkflow_V3_image001.svg</object>
<div class="caption">
Standard life cycle of an issue</div></div>
 </center><h2><a class="anchor" id="occt_contribution_workflow_issue"></a>
Issue registration</h2>
<p>An issue is registered in Mantis bugtracker by the <b>Reporter</b> with definition of the necessary attributes (see also <a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_app">Appendix: Issue attributes</a>):</p>
<p><b>Category</b> &ndash; indicates the OCCT component, to which the issue relates. (If in doubt, assign to OCCT:Foundation Classes.)</p>
<p><b>Severity</b> &ndash; indicates the impact of the issue in the context where it was discovered.</p>
<p><b>Profile</b> &ndash; specifies the configuration, on which the problem was detected. For specific configurations it is possible to specify separately platform, OS, and version. These fields can be left empty if the issue is not configuration-specific. Additional details relevant for the environment where the issue is reproduced (such as compiler version, bitness, etc.) can be provided in the <b>Description</b>.</p>
<p><b>Products Version</b> &ndash; defines the OCCT version, on which the problem has been detected.</p>
<p>It is preferable to indicate the version of the earliest known official release where the problem can be reproduced. If the issue is reported on the current development version of OCCT, the current development version should be used (for convenience, this version is marked by asterisk in Mantis).</p>
<dl class="section note"><dt>Note</dt><dd>OCCT version number can be consulted in the file <a class="elRef" doxygen="C:/builds/IR-2017-08-29_IR-2017-08-29/Windows-64-VC10-opt/OCCT/doc/refman/OCCT.tag:../../refman/html/" href="../../refman/html/_standard___version_8hxx.html">Standard_Version.hxx</a> (value of OCC_VERSION_COMPLETE macro).</dd></dl>
<p><b>Assign to</b> &ndash; developer to whom the issue will be assigned. By default, it is set to <b>Maintainer</b> of the OCCT component selected in <b>Category</b> field.</p>
<p><b>Target Version</b> &ndash; defines the target version for the fix to be provided. By default, it is set to the current version under development.</p>
<p><b>Summary</b> &ndash; a short, one sentence description of the issue.</p>
<p>The <b>Summary</b> has a limit of 128 characters. It should be informative and useful for the developers. It is not allowed to mention the issue originator, and in particular the customer, in the name of the registered issue.</p>
<p>A good practice is to start the issue with indication of the relevant component (OCCT module, package, class etc.) to better represent its context.</p>
<p>The summary should be given in imperative mood when it can be formulated as goal to be achieved or action to be done. In particular, this applies to feature requests and improvements, for instance:</p>
<blockquote class="doxtable">
<p><em>Visualization - provide a support of zoom persistent selection</em> </p>
</blockquote>
<p>If the issue reports a problem, the summary should be given in Present Simple. If reported problem is believed to be a regression, it is recommended to indicate this in the summary, like this:</p>
<blockquote class="doxtable">
<p>[Regression in 6.9.0] <em>IGES - Export of a reversed face leads to wrong data</em> </p>
</blockquote>
<p><b>Description</b> &ndash; should contain a detailed definition of the nature of the registered issue depending on its type.</p>
<p>For a bug it is required to submit a detailed description of the incorrect behavior, including the indication of the cause of the problem (if known at this stage), and details on the context where the issue has been detected.</p>
<p>For a feature or integration request it is necessary to describe the proposed feature in details (as much as possible at that stage), including the changes required for its implementation and the main features of the new functionality.</p>
<p>Example:</p>
<blockquote class="doxtable">
<p><em>Currently selection does not work correctly for non-zoomable objects (those defined using transform persistence). To provide correct selection for such objects, first-level (object) <a class="elRef" doxygen="C:/builds/IR-2017-08-29_IR-2017-08-29/Windows-64-VC10-opt/OCCT/doc/refman/OCCT.tag:../../refman/html/" href="../../refman/html/namespace_b_v_h.html">BVH</a> structures must be updated on each camera change, and frustum must be rebuilt accordingly.</em> </p>
</blockquote>
<dl class="section note"><dt>Note</dt><dd>In the description and notes to the issues you can refer to another issue by its ID prefixed by number sign (e.g.: #12345), and refer to a note by its ID prefixed by tilde (e.g.: ~20123). These references will be expanded by Mantis into links to the corresponding issue or note. When the number sign or the tilde followed by digits are a part of a normal text, add a space before digits (e.g.: "face # 12345 contains ~ 1000 edges") to avoid this conversion.</dd></dl>
<p><b>Steps To Reproduce</b> &ndash; allows describing in detail how to reproduce the issue.</p>
<p>This information is crucial for the developer to investigate the cause of the problem and to create the test case. The optimal approach is to give a sequence of <a class="el" href="occt_user_guides__test_harness.html">DRAW Test Harness</a> commands to reproduce the problem in DRAW. This information can also be provided as a DRAW Tcl script attached to the issue (in <b>Upload File</b> field).</p>
<p><b>Additional information and documentation updates</b> &ndash; any additional information, remarks to be taken into account in Release Notes, etc..</p>
<p><b>Upload File</b> &ndash; allows attaching the shapes, snapshots, scripts, documents, or modified source files of OCCT.</p>
<p>This field can be used to attach a prototype test case in form of a Tcl script for DRAW, a C++ code which can be organized in DRAW commands, sample shapes, documents describing proposed change or analysis of the problem, or other data required for reproduction of the issue. Where applicable, pictures demonstrating a problem and/or desired result can be attached.</p>
<p>The newly registered issue gets status <b>NEW</b> and is assigned to the person indicated in the <b>Assign to</b> field.</p>
<h2><a class="anchor" id="occt_contribution_workflow_assign"></a>
Assigning the issue</h2>
<p>The description of the new issue is checked by the <b>Maintainer</b> and if it is feasible, he may assign the issue to a <b>Developer</b>. Alternatively, any user with <b>Developer</b> access level or higher can assign the issue to himself if he wants to provide a solution.</p>
<p>The recommended way to handle contributions is that the <b>Reporter</b> assigns the issue to himself and provides a solution.</p>
<p>The <b>Maintainer</b> or <b>Bugmaster</b> can close or reassign the issue (in <b>FEEDBACK</b> state) to the <b>Reporter</b> after it has been registered, if its description does not contain sufficient details to reproduce the bug or explain the need of the new feature. That decision shall be documented in the comments to the issue in the Bugtracker.</p>
<p>The assigned issue has status <b>ASSIGNED</b>.</p>
<h2><a class="anchor" id="occt_contribution_workflow_fix"></a>
Resolving the issue</h2>
<p>The <b>Developer</b> responsible for the issue assigned to him provides a solution including:</p>
<ul>
<li>Changes in the code, with appropriate comments;</li>
<li>Test case (when applicable) and data necessary for its execution;</li>
<li>Changes in the user and developer guides (when necessary).</li>
</ul>
<p>The change is integrated to branch named CRxxxxx (where <b>xxxxx</b> is issue number) in the OCCT Git repository, based on current master, and containing a single commit with the appropriate description. Then the issue is switched to <b>RESOLVED</b> for further review and testing.</p>
<p>The following sub-sections describe this process, relevant requirements and options, in more details.</p>
<h3><a class="anchor" id="occt_contribution_workflow_fix_code"></a>
Requirements to the code modification</h3>
<p>The amount of code affected by the change should be limited to the changes required for the bug fix or improvement. Change of layout or re-formatting of the existing code is allowed only in the parts where meaningful changes related to the issue have been made.</p>
<dl class="section note"><dt>Note</dt><dd>If deemed useful, re-formatting or cosmetic changes affecting considerable parts of the code can be made within a dedicated issue.</dd></dl>
<p>The changes should comply with the OCCT <a class="el" href="occt_dev_guides__coding_rules.html">Codng Rules</a>. It is especially important to comment the code properly so that other people can understand it easier.</p>
<p>The modification should be tested by running OCCT tests (on the platform and scope available to <b>Developer</b>) and ensuring absence of regressions. In case if modification affects results of some existing test case and the new result is correct, such test case should be updated to report OK (or BAD), as descibed in <a class="el" href="occt_dev_guides__tests.html#testmanual_details_results">Automated Test System / Interpretation of Test Results</a>.</p>
<h3><a class="anchor" id="occt_contribution_workflow_fix_test"></a>
Providing a test case</h3>
<p>For modifications affecting OCCT functionality, a test case should be created (unless already exists) and included in the commit or patch. See <a class="el" href="occt_dev_guides__tests.html#testmanual_intro_quick_create">Automated Test System / Creating a New Test</a> for relevant instructions.</p>
<p>The data files required for a test case should be attached to the corresponding issue in Mantis (i.e. not included in the commit).</p>
<p>When the test case cannot be provided for any reason, the maximum possible information on how the problem can be reproduced and how to check the fix should be provided in the <b>Steps to Reproduce</b> field of an issue.</p>
<h3><a class="anchor" id="occt_contribution_workflow_fix_doc"></a>
Updating user and developer guides</h3>
<p>If the change affects a functionality described in <a class="el" href="user_guides.html">User Guides</a>, the corresponding user guide should be updated to reflect the change.</p>
<p>If the change affects OCCT test system, build environment, or development tools described in <a class="el" href="dev_guides.html">Developer Guides</a>, the corresponding guide should be updated.</p>
<p>The changes that break compatibility with the previous versions of OCCT (i.e. affecting API or behavior of existing functionality in the way that may require update of existing applications based on an earlier official release of OCCT to work correctly) should be described in the document <a class="el" href="occt_dev_guides__upgrade.html">Upgrade from previous OCCT versions</a>. It is recommended to add a sub-section for each change described. The description should provide the explanation of the incompatibility introduced by the change, and describe how it can be resolved (at least, in known situations). When feasible, the automatic upgrade procedure (adm/upgrade.tcl) can be extended by a new option to perform the required upgrade of the dependent code automatically.</p>
<h3><a class="anchor" id="occt_contribution_workflow_fix_git"></a>
Submission of change as a Git branch</h3>
<p>The modification of sources should be provided in the dedicated branch of the official OCCT Git repository.</p>
<p>The branch should contain a single commit, with the appropriate commit message (see <a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_workflow_fix_commit">Requirements to the commit message</a> below).</p>
<p>In general, this branch should be based on the recent version of the master branch. It is highly preferable to submit changes basing on the current master. In case if the fix is implemented on the previous release of OCCT, the branch can be based on the corresponding tag in Git, instead of the master.</p>
<p>The branch name should be composed of letters <b>CR</b> (abbreviation of "Change Request") followed by the issue ID number (without leading zeros). It is possible to add an optional suffix to the branch name after the issue ID, e.g. to distinguish between several versions of the fix (see <a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_nonstd_rebase">Updating branches in Git</a>).</p>
<p>See <a class="el" href="occt_dev_guides__git_guide.html">Guide to using GIT</a> for help.</p>
<dl class="section note"><dt>Note</dt><dd>When a branch with the name given according to the above rule is pushed to Git, a note is automatically added to the corresponding issue in Mantis, indicating the person who has made the push, the commit hash, and (for new commits) the description.</dd></dl>
<h3><a class="anchor" id="occt_contribution_workflow_fix_commit"></a>
Requirements to the commit message</h3>
<p>The commit message posted in Git constitutes an integral part of both the fix and the release documentation.</p>
<p>The first line of the commit message should contain the Summary of the issue (starting with its ID followed by colon, e.g. "0022943: Bug in TDataXtd_PatternStd"), followed by an empty line.</p>
<p>The following lines should provide a description of the context and details on the changes made. The contents and the recommended structure of the description depend on the nature of the bug.</p>
<p>In a general case, the following elements should be present:</p><ul>
<li><b>Problem</b> &ndash; a description of the unwanted behavior;</li>
<li><b>Change</b> &ndash; a description of the implemented changes, including the names of involved classes / methods / enumerations etc.;</li>
<li><b>Result</b> &ndash; a description of the current behavior (after the implementation).</li>
</ul>
<p>Example:</p>
<blockquote class="doxtable">
<p><em>0026330: <a class="elRef" doxygen="C:/builds/IR-2017-08-29_IR-2017-08-29/Windows-64-VC10-opt/OCCT/doc/refman/OCCT.tag:../../refman/html/" href="../../refman/html/class_b_rep_offset_a_p_i___thru_sections.html">BRepOffsetAPI_ThruSections</a> creates invalid shape.</em></p>
<p><em>Methods <a class="elRef" doxygen="C:/builds/IR-2017-08-29_IR-2017-08-29/Windows-64-VC10-opt/OCCT/doc/refman/OCCT.tag:../../refman/html/" href="../../refman/html/class_b_rep___tool.html#aeaa70c29f0a30d827fd8a36116d74b91">BRep_Tool::CurveOnSurface()</a> and <a class="elRef" doxygen="C:/builds/IR-2017-08-29_IR-2017-08-29/Windows-64-VC10-opt/OCCT/doc/refman/OCCT.tag:../../refman/html/" href="../../refman/html/class_b_rep_check___edge.html#adbbe3e0253ab052a8001dd848ddb0f12">BRepCheck_Edge::InContext()</a> now properly handle parametric range on a 3D curve when it is used to generate a p-curve dynamically (on a planar surface) and both the surface and the 3D curve have non-null locations.</em> </p>
</blockquote>
<p>Provide sufficient context so that potential user of the affected functionality can understand what has been changed and how the algorithm works now. Describe reason and essence of the changes made, but do not go too deep into implementation details &ndash; these should be reflected in comments in the code.</p>
<h3><a class="anchor" id="occt_contribution_workflow_fix_resolve"></a>
Marking issue as resolved</h3>
<p>To mark the change as ready for review and testing, the corresponding issue should be switched to <b>RESOLVED</b> state. By default, the issue gets assigned to the <b>Maintainer</b> of the component, who is thus responsible for its review. Alternatively, another person can be selected as a reviewer at this step.</p>
<p>When the issue is switched to <b>RESOLVED</b>, it is required to update or fill the field <b>Steps to reproduce</b>. The possible variants are:</p>
<ul>
<li>The name of an existing or new test case (preferred variant);</li>
<li>A sequence of DRAW commands;</li>
<li>N/A (Not required / Not possible / Not applicable);</li>
<li>Reference to an issue in the bug tracker of another project.</li>
</ul>
<h2><a class="anchor" id="occt_contribution_workflow_review"></a>
Code review</h2>
<p>The <b>Reviewer</b> analyzes the proposed solution for applicability in accordance with OCCT <a class="el" href="occt_dev_guides__coding_rules.html">Coding Rules</a> and examines all changes in the sources, test case(s), and documentation to detect obvious and possible errors, misprints, or violations of the coding style.</p>
<p>If the Reviewer detects some problems, he can either:</p>
<ul>
<li><p class="startli">Fix these issues and provide a new solution. The issue can then be switched to <b>REVIEWED</b>.</p>
<p class="startli">In case of doubt or possible disagreement the <b>Reviewer</b> can reassign the issue (in <b>RESOLVED</b> state) to the <b>Developer</b>, who then becomes a <b>Reviewer</b>. Possible disagreements should be resolved through discussion, which is done normally within issue notes (or on the OCCT developer’s forum if necessary).</p>
</li>
<li>Reassign the issue back to the <b>Developer</b>, providing detailed list of remarks. The issue then gets status <b>ASSIGNED</b> and a new solution should be provided.</li>
</ul>
<p>If Reviewer does not detect any problems, or provides a corrected version, he changes status to <b>REVIEWED</b>. The issue gets assigned to the <b>Bugmaster</b>.</p>
<h2><a class="anchor" id="occt_contribution_workflow_test"></a>
Testing</h2>
<p>The issues that are in <b>REVIEWED</b> state are subject of certification (non-regression) testing. The issue is assigned to an OCCT <b>Tester</b> when he starts processing it.</p>
<p>If the branch submitted for testing is based on obsolete status of the master branch, <b>Tester</b> <a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_nonstd_rebase">rebases</a> it on master HEAD. In case of conflicts, the issue is assigned back to <b>Developer</b> in <b>FEEDBACK</b> status, requesting for a rebase.</p>
<p>Certification testing includes:</p><ul>
<li>Addition of new data models (if required for a new test case) to the data base;</li>
<li>Revision of the new test case(s) added by developer, and changes in the existing test cases included in commit. The <b>Tester</b> can amend tests to ensure their correct behavior in the certification environment.</li>
<li>Building OCCT on a sub-set of supported configurations (OS and compiler), watching for errors and warnings;</li>
<li>Execution of tests on sub-set of supported platforms (at least, one Windows and one Linux configuration), watching for regressions;</li>
<li>Building OCCT samples, watching for errors;</li>
<li>Building and testing of OCC products based on OCCT.</li>
</ul>
<p>If the <b>Tester</b> does not detect problems or regressions, he changes the status to <b>TESTED</b> for further integration.</p>
<p>If the <b>Tester</b> detects build problems or regressions, he changes the status to <b>ASSIGNED</b> and reassigns the issue to the <b>Developer</b> with a detailed description of the problems. The <b>Developer</b> should analyze the reported problems and, depending on results of this analysis, either:</p><ul>
<li>Confirm that the detected problems are expected changes and they should be accepted as a new status of the code. Then the issue should be switched to <b>FEEDBACK</b> and assigned to the <b>Bugmaster</b>.</li>
<li>Produce a new solution (see <a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_workflow_fix">Resolving the issue</a>, and also <a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_nonstd_minor">Minor corrections</a>).</li>
</ul>
<h2><a class="anchor" id="occt_contribution_workflow_integrate"></a>
Integration of a solution</h2>
<p>Before integration into the master branch of the repository the <b>Integrator</b> checks the following conditions:</p><ul>
<li>the change has been reviewed;</li>
<li>the change has been tested without regressions (or with regressions treated properly);</li>
<li>the test case has been created for this issue (when applicable), and the change has been rechecked on this test case;</li>
<li>the change does not conflict with other changes integrated previously.</li>
</ul>
<p>If the result of check is successful the Integrator integrates the solution into the branch. The integrations are performed weekly; integration branches are named following the pattern IR-YYYY-MM-DD.</p>
<p>Each change is integrated as a single commit without preserving the history of changes made in the branch (by rebase, squashing all intermediate commits if any), however, preserving the author when possible. This is done to have the master branch history plain and clean. The following picture illustrates the process:</p>
<div class="image">
<img src="OCCT_ContributionWorkflow_V3_image002.png" alt="OCCT_ContributionWorkflow_V3_image002.png"/>
<div class="caption">
Integration of several branches</div></div>
<p>The new integration branch is tested against possible regressions that might appear due to interference between separate changes. When the tests are OK, the integration branch is pushed as the new master to the official repository. The issue status is set then to <b>VERIFIED</b> and is assigned to the <b>Reporter</b> so that he could check the fix as integrated.</p>
<p>The branches corresponding to the integrated fixes are removed from the repository by the <b>Bugmaster</b>.</p>
<h2><a class="anchor" id="occt_contribution_workflow_close"></a>
Closing an issue</h2>
<p>When possible, the <b>Reporter</b> should check whether the problem is actually resolved in the environment where it has been discovered, after the fix is integrated to master. If the fix does not actually resolve the original problem, the issue in <b>VERIFIED</b> status can be reopened and assigned back to the <b>Developer</b> for rework. The details on how to check that the issue is still reproducible should be provided. However, if the issue does resolve the problem as described in the original report, but a similar problem is discovered for another input data or configuration, or the fix has caused a regression, that problem should be registered as a separate (<a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_nonstd_relate">related</a>) issue.</p>
<p>If the fix integrated to master causes regressions, <b>Bugmaster</b> can revert it and reopen the issue.</p>
<p>The <b>Bugmaster</b> closes the issue after the regular OCCT Release, provided that the issue status is <b>VERIFIED</b> and the change was actually included in the release. The final issue state is <b>CLOSED</b>.</p>
<p>The field <b>Fixed in Version</b> of the issue is set to the OCCT version where it is fixed.</p>
<h1><a class="anchor" id="occt_contribution_nonstd"></a>
Additional workflow elements</h1>
<h2><a class="anchor" id="occt_contribution_nonstd_feedback"></a>
Requesting more information or specific action</h2>
<p>If, at any step of the issue lifetime, the person responsible for it cannot process it due to absence of required information, expertise, or rights, he can switch it to status <b>FEEDBACK</b> and assign to the person who is (presumably) able to resolve the block. Some examples of typical situations where <b>FEEDBACK</b> is used are:</p>
<ul>
<li>The <b>Maintainer</b> or the <b>Developer</b> requests for more information from the <b>Reporter</b> to reproduce the issue;</li>
<li>The <b>Tester</b> requests the <b>Developer</b> or the <b>Maintainer</b> to help him in the interpretation of testing results;</li>
<li>The <b>Developer</b> or the <b>Maintainer</b> asks the <b>Bugmaster</b> to close the issue that is found irrelevant or already fixed (see <a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_nonstd_autofix">Handling non-reproducible issues</a>).</li>
</ul>
<p>In general, issues with status <b>FEEDBACK</b> should be processed as fast as possible, to avoid unjustified delays.</p>
<h2><a class="anchor" id="occt_contribution_nonstd_relate"></a>
Defining relationships between issues</h2>
<p>When two or more issues are related to each other, this relationship should be reflected in the issue tracker. It is also highly recommended to add a note to explain the relationship. Typical cases of relationships are:</p>
<ul>
<li>Issue A is caused by previous fix made for issue B (A is a child of B);</li>
<li>Issue A describes the same problem as issue B (A is a duplicate of B);</li>
<li>Issues A and B relate to the same piece of code, functionality etc., in the sense that the fix for one of these issues will affect the other (A is related to B)</li>
</ul>
<p>When the fix made for one issue also resolves another one, these issues should be marked as related or duplicate. In general, the duplicate issue should have the same status, and, when closed, be marked as fixed in the same OCCT version, as the main one.</p>
<h2><a class="anchor" id="occt_contribution_nonstd_patch"></a>
Submission of a change as a patch</h2>
<p>In some cases (if Git is not accessible for the contributor), external contributions can be submitted as a patch file (generated by <em>diff</em> command) or as modified sources attached to the Mantis issue. The OCCT version, for which the patch is generated, should be clearly specified (e.g. as hash code of Git commit if the patch is based on an intermediate state of the master).</p>
<dl class="section note"><dt>Note</dt><dd>Such contributions should be put to Git by someone else (e.g. the <b>Reviewer</b>), this may cause delay in their processing.</dd></dl>
<h2><a class="anchor" id="occt_contribution_nonstd_rebase"></a>
Updating branches in Git</h2>
<p>Updates of the existing branch (e.g. taking into account the remarks of the <b>Reviewer</b>, or fixing regressions) should be provided as new commits on top of previous state of the branch.</p>
<p>It is allowed to rebase the branch on the new state of the master and push it to the repository under the same name (with <em>&ndash;force</em> option) provided that the original sequence of commits is preserved.</p>
<p>When a change is squashed into a single commit (e.g. to be submitted for review), it should be pushed into a branch a with different name.</p>
<p>The recommended approach is to add a numeric suffix (index) indicating the version of the change, e.g. "CR12345_5". Usually it is worth keeping a non-squashed branch in Git for reference.</p>
<p>To avoid confusions, the branch corresponding to the latest version of the change should have a greater index.</p>
<dl class="section note"><dt>Note</dt><dd>Make sure to revise the commit message after squashing a branch, to keep it meaningful and comprehensive.</dd></dl>
<h2><a class="anchor" id="occt_contribution_nonstd_minor"></a>
Minor corrections</h2>
<p>In some cases review remarks or results of testing require only minor corrections to be done in the branch containing a change. "Minor" implies that the correction does not impact the functionality and does not affect the description of the previously committed change.</p>
<p>As an exception to general <a class="el" href="occt_dev_guides__contribution_workflow.html#occt_contribution_workflow_fix_git">single-commit rule</a>, it is allowed to put such minor corrections on top of the existing branch as a separate commit, and re-submit it for further processing in the same branch, without squashing.</p>
<p>Minor commits should have a single-line message starting with #. These messages will be ignored when the branch is squashed at integration.</p>
<p>Typical cases of minor corrections are:</p>
<ul>
<li>Amendments of test cases (including those made by the <b>Tester</b> to adjust a test script to a specific platform);</li>
<li>Trivial corrections of compilation warnings (such as removal of an unused variable);</li>
<li>Addition or correction of comments or documentation;</li>
<li>Corrections of code formatting (e.g. reversion of irrelevant formatting changes made in the main commit).</li>
</ul>
<h2><a class="anchor" id="occt_contribution_nonstd_autofix"></a>
Handling non-reproducible issues</h2>
<p>Investigation of each issue starts with reproducing it on current development version (master).</p>
<p>If it cannot be reproduced on the current master, but can be reproduced on one of previous releases (or previous state of the master), it is considered as solved by a change made for another issue. If that "fixing" issue can be identified (e.g. by parsing Git log), it should be set as related to that issue. The issue should be switched to <b>FEEDBACK</b> and assigned to the <b>Bugmaster</b> for further processing.</p>
<p>The <b>Bugmaster</b> decides whether it is necessary to create a test case for that issue, and if so may assign it to the <b>Developer</b> or the <b>Tester</b> to create a test. The issue then follows the standard workflow.</p>
<p>Otherwise, if the issue is fixed in one of previous releases, the <b>Bugmaster</b> closes it setting the appropriate value in <b>Fixed in Version</b> field, or, if the issue is fixed after the last release, switches it to <b>VERIFIED</b> status.</p>
<p>If the issue cannot be reproduced due to an unclear description, missing data, etc., it should be assigned back to the <b>Reporter</b> in <b>FEEDBACK</b> status, requesting for more information. The <b>Reporter</b> should provide additional information within one month; after that time, if no new information is provided, the issue should be closed by the <b>Bugmaster</b> with resolution <b>Unable to reproduce</b>.</p>
<h1><a class="anchor" id="occt_contribution_app"></a>
Appendix: Issue attributes</h1>
<h2><a class="anchor" id="occt_contribution_app_category"></a>
Category</h2>
<p>The category corresponds to the component of OCCT where the issue is found:</p>
<table class="doxtable">
<tr>
<th align="left">Category </th><th align="left">Component  </th></tr>
<tr>
<td align="left">OCCT:Foundation Classes </td><td align="left">Foundation Classes module </td></tr>
<tr>
<td align="left">OCCT:Modeling Data </td><td align="left">Modeling Data classes </td></tr>
<tr>
<td align="left">OCCT:Modeling Algorithms </td><td align="left">Modeling Algorithms, except shape healing and meshing </td></tr>
<tr>
<td align="left">OCCT:Shape Healing </td><td align="left">Shape Healing component (TKShapeHealing) </td></tr>
<tr>
<td align="left">OCCT:Mesh </td><td align="left"><a class="elRef" doxygen="C:/builds/IR-2017-08-29_IR-2017-08-29/Windows-64-VC10-opt/OCCT/doc/refman/OCCT.tag:../../refman/html/" href="../../refman/html/namespace_b_rep_mesh.html">BRepMesh</a> algorithm </td></tr>
<tr>
<td align="left">OCCT:Data Exchange </td><td align="left">Data Exchange module </td></tr>
<tr>
<td align="left">OCCT:Visualization </td><td align="left">Visualization module </td></tr>
<tr>
<td align="left">OCCT:Application Framework </td><td align="left">OCAF </td></tr>
<tr>
<td align="left">OCCT:DRAW </td><td align="left">DRAW Test Harness </td></tr>
<tr>
<td align="left">OCCT:Tests </td><td align="left">Automatic Test System </td></tr>
<tr>
<td align="left">OCCT:Documentation </td><td align="left">Documentation </td></tr>
<tr>
<td align="left">OCCT:Coding </td><td align="left">General code quality </td></tr>
<tr>
<td align="left">OCCT:Configuration </td><td align="left">Configuration, build system, etc. </td></tr>
<tr>
<td align="left">OCCT:Releases </td><td align="left">Official OCCT releases </td></tr>
<tr>
<td align="left">Website:Tracker </td><td align="left">OCCT Mantis issue tracker, tracker.dev.opencascade.org </td></tr>
<tr>
<td align="left">Website:Portal </td><td align="left">OCCT development portal, dev.opencascade.org </td></tr>
<tr>
<td align="left">Website:Git </td><td align="left">OCCT Git repository, git.dev.opencascade.org </td></tr>
</table>
<h2><a class="anchor" id="occt_contribution_app_severity"></a>
Severity</h2>
<p>Severity shows at which extent the issue affects the product. The list of used severities is given in the table below in the descending order.</p>
<table class="doxtable">
<tr>
<th align="left">Severity </th><th align="left">Description  </th></tr>
<tr>
<td align="left">crash </td><td align="left">Crash of the application or OS, loss of data </td></tr>
<tr>
<td align="left">block </td><td align="left">Regression corresponding to the previously delivered official version. Impossible operation of a function on any data with no work-around. Missing function previously requested in software requirements specification. Destroyed data. </td></tr>
<tr>
<td align="left">major </td><td align="left">Impossible operation of a function with existing work-around. Incorrect operation of a function on a particular dataset. Impossible operation of a function after intentional input of incorrect data. Incorrect behavior of a function after intentional input of incorrect data. </td></tr>
<tr>
<td align="left">minor </td><td align="left">Incorrect behavior of a function corresponding to the description in software requirements specification. Insufficient performance of a function. </td></tr>
<tr>
<td align="left">tweak </td><td align="left">Ergonomic inconvenience, need of light updates. </td></tr>
<tr>
<td align="left">text </td><td align="left">Non-conformance of the program code to the Coding Rules, mistakes and non-functional errors in the source text (e.g. unnecessary variable declarations, missing comments, grammatical errors in user manuals). </td></tr>
<tr>
<td align="left">trivial </td><td align="left">Cosmetic issues. </td></tr>
<tr>
<td align="left">feature </td><td align="left">Request for a new feature or improvement. </td></tr>
<tr>
<td align="left">integration request </td><td align="left">Requested integration of an existing feature into the product. </td></tr>
<tr>
<td align="left">just a question </td><td align="left">A question to be processed, without need of any changes in the product. </td></tr>
</table>
<h2><a class="anchor" id="occt_contribution_app_status"></a>
Status</h2>
<p>The bug statuses that can be applied to the issues are listed in the table below.</p>
<table class="doxtable">
<tr>
<th align="left">Status </th><th align="left">Description  </th></tr>
<tr>
<td align="left">New </td><td align="left">A new, just registered issue. </td></tr>
<tr>
<td align="left">Acknowledged </td><td align="left">Can be used to mark the issue as postponed. </td></tr>
<tr>
<td align="left">Confirmed </td><td align="left">Can be used to mark the issue as postponed. </td></tr>
<tr>
<td align="left">Feedback </td><td align="left">The issue requires more information or a specific action. </td></tr>
<tr>
<td align="left">Assigned </td><td align="left">Assigned to a developer. </td></tr>
<tr>
<td align="left">Resolved </td><td align="left">The issue has been fixed, and now is waiting for review. </td></tr>
<tr>
<td align="left">Reviewed </td><td align="left">The issue has been reviewed, and now is waiting for testing (or being tested). </td></tr>
<tr>
<td align="left">Tested </td><td align="left">The fix has been internally tested by the tester with success on the full non-regression database or its part and a test case has been created for this issue. </td></tr>
<tr>
<td align="left">Verified </td><td align="left">The fix has been integrated into the master of the corresponding repository </td></tr>
<tr>
<td align="left">Closed + resolution </td><td align="left">The fix has been integrated to the master. The corresponding test case has been executed successfully. The issue is no longer reproduced. </td></tr>
</table>
<h2><a class="anchor" id="occt_contribution_app_resolution"></a>
Resolution</h2>
<p><b>Resolution</b> is set when the bug is closed. "Reopen" resolution is added automatically when the bug is reopened.</p>
<table class="doxtable">
<tr>
<th align="left">Resolution </th><th align="left">Description  </th></tr>
<tr>
<td align="left">Open </td><td align="left">The issue is pending. </td></tr>
<tr>
<td align="left">Fixed </td><td align="left">The issue has been successfully fixed. </td></tr>
<tr>
<td align="left">Reopened </td><td align="left">The bug has been reopened because of insufficient fix or regression. </td></tr>
<tr>
<td align="left">Unable to reproduce </td><td align="left">The bug is not reproduced. </td></tr>
<tr>
<td align="left">Not fixable </td><td align="left">The bug cannot be fixed because e.g. it is a bug of third party software, OS or hardware limitation, etc. </td></tr>
<tr>
<td align="left">Duplicate </td><td align="left">The bug for the same issue already exists in the tracker. </td></tr>
<tr>
<td align="left">Not a bug </td><td align="left">It is a normal behavior in accordance with the specification of the product. </td></tr>
<tr>
<td align="left">No change required </td><td align="left">The issue didn’t require any change of the product, such as a question issue. </td></tr>
<tr>
<td align="left">Suspended </td><td align="left">The issue is postponed (for Acknowledged status). </td></tr>
<tr>
<td align="left">Documentation updated </td><td align="left">The documentation has been updated to resolve a misunderstanding causing the issue. </td></tr>
<tr>
<td align="left">Won’t fix </td><td align="left">It is decided to keep the existing behavior. </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 30 2017 17:08:51 for Open CASCADE Technology by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
