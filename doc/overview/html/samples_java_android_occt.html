<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open CASCADE Technology: OCCT JniViewer sample for Android</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="occ_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open CASCADE Technology
   &#160;<span id="projectnumber">7.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('samples_java_android_occt.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">OCCT JniViewer sample for Android </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This sample demonstrates simple way of using OCCT libraries in Android application written using Java.</p>
<p>The connection between Java and OCCT (C++) level is provided by proxy library, libTKJniSample.so, written in C++ with exported JNI methods of Java class OcctJniRenderer. The proxy library contains single C++ class OcctJni_Viewer encapsulating OCCT viewer and providing functionality to manipulate this viewer and to import OCCT shapes from several supported formats of CAD files (IGES, STEP, BREP).</p>
<p>This sample demonstrates indirect method of wrapping C++ to Java using manually created proxy library. Alternative method is available, wrapping individual OCCT classes to Java equivalents so that their full API is available to Java user and the code can be programmed on Java level similarly to C++ one. See description of OCCT Java Wrapper in Advanced Samples and Tools on OCCT web site at <a href="http://www.opencascade.org/support/products/advsamples">http://www.opencascade.org/support/products/advsamples</a></p>
<p>Run Eclipse from ADT (Android Developer Tools) for building the sample. To import sample project perform </p><div class="fragment"><div class="line">File -&gt; Import... -&gt; Android -&gt; Existing Android code into Workspace</div></div><!-- fragment --><p> and specify this directory. The project re-build will be started immediately right after importation if "Build automatically" option is turned on (default in Eclipse). Proxy library compilation and packaging is performed by NDK build script, called by "C++ Builder" configured within Eclipse project. The path to "ndk-build" tool from Android NDK (Native Development Kit) should be specified in Eclipse project properties: </p><div class="fragment"><div class="line">Project -&gt; Properties -&gt; Builders -&gt; C++ Builder -&gt; Edit -&gt; Location</div></div><!-- fragment --><p>Now paths to OCCT C++ libraries and additional components should be specified in "jni/Android.mk" file: </p><div class="fragment"><div class="line">OCCT_ROOT := $(LOCAL_PATH)/../../../..</div><div class="line"></div><div class="line">FREETYPE_INC  := $(OCCT_ROOT)/../freetype/include/freetype2</div><div class="line">FREETYPE_LIBS := $(OCCT_ROOT)/../freetype/libs</div><div class="line"></div><div class="line">FREEIMAGE_INC  := $(OCCT_ROOT)/../FreeImage/include</div><div class="line">FREEIMAGE_LIBS := $(OCCT_ROOT)/../FreeImage/libs</div><div class="line"></div><div class="line">OCCT_INC  := $(OCCT_ROOT)/inc</div><div class="line">OCCT_LIBS := $(OCCT_ROOT)/and/libs</div></div><!-- fragment --><p> The list of extra components (Freetype, FreeImage) depends on OCCT configuration. Variable  is used within this script to refer to active architecture. E.g. for 32-bit ARM build (see variable <em>APP_ABI</em> in "jni/Application.mk") the folder <em>OCCT_LIBS</em> should contain sub-folder "armeabi-v7a" with OCCT libraries.</p>
<p>FreeImage is optional and does not required for this sample, however you should include all extra libraries used for OCCT building and load the explicitly from Java code within OcctJniActivity::loadNatives() method, including toolkits from OCCT itself in proper order: </p><div class="fragment"><div class="line">if (!loadLibVerbose (&quot;TKernel&quot;, aLoaded, aFailed)</div><div class="line"> || !loadLibVerbose (&quot;TKMath&quot;,  aLoaded, aFailed)</div><div class="line"> || !loadLibVerbose (&quot;TKG2d&quot;,   aLoaded, aFailed)</div></div><!-- fragment --><p> Note that C++ STL library is not part of Android system. Thus application must package this library as well as extra component. "gnustl_shared" STL implementation is expected within this sample.</p>
<p>After successful build, the application can be packaged to Android:</p><ul>
<li>Deploy and run application on connected device or emulator directly from Eclipse using adb interface by menu items "Run" and "Debug". This would sign package with debug certificate.</li>
<li>Prepare signed end-user package using wizard File -&gt; Export -&gt; Android -&gt; Export Android Application. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 30 2017 17:08:49 for Open CASCADE Technology by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
